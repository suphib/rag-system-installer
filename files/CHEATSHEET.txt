â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         RAG SYSTEM - QUICK REFERENCE                  â•‘
â•‘         Cheat Sheet fÃ¼r tÃ¤gliche Nutzung              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ INSTALLATION (ONE-LINER)
===========================
ssh root@SERVER-IP
cd /root && chmod +x *.sh && ./00-install-all.sh


ğŸ“ SERVICE URLs
===============
API:           http://SERVER-IP:3000
Qdrant API:    http://SERVER-IP:6333
Qdrant UI:     http://SERVER-IP:6335
Ollama:        http://SERVER-IP:11434


ğŸ”§ API MANAGEMENT (PM2)
=======================
pm2 status                    # Alle Services anzeigen
pm2 logs rag-api              # Live Logs
pm2 logs rag-api --lines 100  # Letzte 100 Zeilen
pm2 restart rag-api           # Neu starten
pm2 stop rag-api              # Stoppen
pm2 start rag-api             # Starten
pm2 monit                     # Monitoring Dashboard
pm2 delete rag-api            # Service entfernen


ğŸ³ QDRANT (DOCKER)
==================
docker ps                              # Container Status
docker logs qdrant                     # Logs
docker logs -f qdrant                  # Live Logs
docker restart qdrant                  # Neu starten
docker stop qdrant                     # Stoppen
docker start qdrant                    # Starten
docker stats qdrant                    # Resource Usage
cd /opt/rag-system && docker-compose up -d    # Alle starten
cd /opt/rag-system && docker-compose down     # Alle stoppen


ğŸ¤– OLLAMA
=========
ollama list                   # Alle Modelle
ollama run llama3.1:8b "Hi"   # Model testen
ollama pull llama3.1:13b      # Neues Model laden
ollama rm llama3.1:8b         # Model lÃ¶schen
systemctl status ollama       # Service Status
systemctl restart ollama      # Service neu starten
journalctl -u ollama -f       # Live Logs


ğŸ“¤ PDF HOCHLADEN
================
# Single File
curl -X POST http://localhost:3000/api/upload \
  -F "file=@dokument.pdf"

# Mit Server IP (von auÃŸen)
curl -X POST http://SERVER-IP:3000/api/upload \
  -F "file=@dokument.pdf"


ğŸ’¬ CHAT / FRAGEN
================
# Einfache Frage
curl -X POST http://localhost:3000/api/chat \
  -H "Content-Type: application/json" \
  -d '{"question":"Was ist KI?"}'

# Mit mehr Ergebnissen
curl -X POST http://localhost:3000/api/chat \
  -H "Content-Type: application/json" \
  -d '{"question":"KÃ¼ndigungsfristen?","maxResults":10}'

# Pretty JSON Output
curl -s http://localhost:3000/api/chat \
  -H "Content-Type: application/json" \
  -d '{"question":"Test"}' | jq '.'


ğŸ“Š SYSTEM STATUS
================
# Health Check
curl http://localhost:3000/api/health

# Qdrant Stats
curl http://localhost:3000/api/stats | jq '.'

# Collection Info
curl http://localhost:6333/collections/documents | jq '.'

# Alle Collections
curl http://localhost:6333/collections | jq '.'


ğŸ” MONITORING
=============
# CPU + RAM
htop                          # Interaktiv
top                           # Standard

# Disk Space
df -h                         # Alle Mounts
df -h /                       # Root
du -sh /opt/rag-system/*      # RAG System GrÃ¶ÃŸe

# Memory
free -h                       # Ãœbersicht
cat /proc/meminfo             # Details

# Swap
swapon --show                 # Swap Status
free -h | grep Swap           # Swap Usage

# Network
netstat -tulpn                # Offene Ports
ss -tulpn                     # Moderne Alternative
iftop                         # Live Traffic (installieren)


ğŸ“ LOGS
=======
# API Logs
pm2 logs rag-api              # Live
pm2 logs rag-api --err        # Nur Errors
pm2 logs rag-api --lines 50   # Letzte 50 Zeilen
cat /opt/rag-system/logs/out.log       # Output Log
cat /opt/rag-system/logs/err.log       # Error Log
tail -f /opt/rag-system/logs/combined.log  # Live

# Qdrant Logs
docker logs qdrant            # Alle
docker logs -f qdrant         # Live
docker logs --tail 100 qdrant # Letzte 100

# Ollama Logs
journalctl -u ollama          # Alle
journalctl -u ollama -f       # Live
journalctl -u ollama --since "1 hour ago"  # Letzte Stunde

# Installation Log
cat /root/rag-setup.log


ğŸ”¥ FIREWALL (UFW)
=================
ufw status                    # Status
ufw status verbose            # Detailliert
ufw allow 8080/tcp            # Port Ã¶ffnen
ufw delete allow 8080/tcp     # Port schlieÃŸen
ufw disable                   # Firewall aus
ufw enable                    # Firewall an


ğŸ—‚ï¸ WICHTIGE VERZEICHNISSE
==========================
/opt/rag-system/              # Hauptverzeichnis
â”œâ”€â”€ api/                      # API Code
â”‚   â”œâ”€â”€ src/                  # TypeScript Source
â”‚   â”œâ”€â”€ dist/                 # Compiled JS
â”‚   â””â”€â”€ node_modules/         # Dependencies
â”œâ”€â”€ qdrant/                   # Qdrant Data (BACKUP!)
â”œâ”€â”€ documents/                # PDFs (optional)
â”œâ”€â”€ logs/                     # API Logs
â””â”€â”€ docker-compose.yml        # Qdrant Config

/root/                        # Setup Scripts
â”œâ”€â”€ *.sh                      # Installation Scripts
â”œâ”€â”€ README.md                 # VollstÃ¤ndige Doku
â”œâ”€â”€ rag-setup.log            # Installation Log
â””â”€â”€ rag-info.txt             # System Info


ğŸ’¾ BACKUP
=========
# Qdrant Data (wichtig!)
tar -czf qdrant-backup-$(date +%Y%m%d).tar.gz /opt/rag-system/qdrant/

# API Code
tar -czf api-backup-$(date +%Y%m%d).tar.gz /opt/rag-system/api/

# Gesamtes System
tar -czf rag-full-backup-$(date +%Y%m%d).tar.gz /opt/rag-system/

# Download (auf lokalem PC)
scp root@SERVER-IP:/root/*.tar.gz ./


ğŸ”„ UPDATES
==========
# Ollama Update
curl -fsSL https://ollama.com/install.sh | sh

# Qdrant Update
cd /opt/rag-system
docker-compose pull
docker-compose up -d

# API Dependencies
cd /opt/rag-system/api
npm update

# System Packages
apt update && apt upgrade -y


ğŸ› COMMON ISSUES
================
# API nicht erreichbar
â†’ pm2 logs rag-api
â†’ pm2 restart rag-api
â†’ ufw status (Port 3000 offen?)

# Qdrant nicht erreichbar
â†’ docker ps -a
â†’ docker logs qdrant
â†’ docker restart qdrant

# Out of Memory
â†’ free -h
â†’ Swap prÃ¼fen: swapon --show
â†’ Mehr Swap: siehe README

# Langsame Antworten
â†’ top / htop (CPU checken)
â†’ Model zu groÃŸ? â†’ llama3.1:8b nutzen
â†’ Zu wenig RAM? â†’ Swap erhÃ¶hen

# Model lÃ¤dt nicht
â†’ ollama list
â†’ ollama pull llama3.1:8b
â†’ systemctl restart ollama


âš¡ PERFORMANCE TUNING
=====================
# Kleineres Modell (schneller)
ollama pull llama3.1:8b       # ~4.7 GB RAM

# GrÃ¶ÃŸeres Modell (besser)
ollama pull llama3.1:13b      # ~13 GB RAM
ollama pull llama3.1:70b      # ~40+ GB RAM (nicht auf EPYC 03!)

# In API Ã¤ndern (.env)
nano /opt/rag-system/api/.env
# MODEL_NAME=llama3.1:13b
pm2 restart rag-api


ğŸ” SECURITY
===========
# SSH Key Login (statt Passwort)
ssh-keygen                    # Auf lokalem PC
ssh-copy-id root@SERVER-IP    # Key hochladen
# Passwort-Login deaktivieren:
nano /etc/ssh/sshd_config
# PasswordAuthentication no
systemctl restart sshd

# Fail2ban Status
fail2ban-client status
fail2ban-client status sshd

# Firewall Regeln anzeigen
ufw status numbered


ğŸŒ PRODUCTION SETUP
===================
# Domain + SSL
apt install nginx certbot python3-certbot-nginx
certbot --nginx -d deine-domain.de

# Nginx Reverse Proxy
nano /etc/nginx/sites-available/rag-api
# proxy_pass http://localhost:3000;
systemctl reload nginx


ğŸ“± INTEGRATION (CasaManager)
=============================
// In NestJS Service:
async uploadContract(file: Buffer) {
  const formData = new FormData();
  formData.append('file', file, 'contract.pdf');
  
  return await axios.post('http://rag-server:3000/api/upload', 
    formData
  );
}

async askQuestion(question: string) {
  return await axios.post('http://rag-server:3000/api/chat', {
    question
  });
}


ğŸ¯ QUICK TESTS
==============
# 1. Alles OK?
curl http://localhost:3000/api/health

# 2. Ollama lÃ¤uft?
curl http://localhost:11434/api/tags

# 3. Qdrant lÃ¤uft?
curl http://localhost:6333/collections

# 4. Chat funktioniert?
curl -X POST http://localhost:3000/api/chat \
  -H "Content-Type: application/json" \
  -d '{"question":"Hi"}'

# 5. Full System Test
./05-test-system.sh


ğŸ“ HILFE
========
Installation Log:  /root/rag-setup.log
System Info:       /root/rag-info.txt
VollstÃ¤ndige Doku: /root/README.md
API Code:          /opt/rag-system/api/src/

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
EOF - Cheat Sheet
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
